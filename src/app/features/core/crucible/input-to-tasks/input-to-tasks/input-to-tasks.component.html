<div class="task-importer">
  <h2>Mass Add Tasks</h2>

  <!-- Input Section -->
  <div class="input-section">
    <!-- Text Input -->
    <mat-form-field appearance="outline" class="full-width">
      <textarea
        matInput
        [(ngModel)]="inputText"
        placeholder="Enter tasks (CSV, JSON, list, or code)"
        (input)="onInputChange()"
        rows="1"
      ></textarea>
    </mat-form-field>

    <!-- Input Action Buttons -->
    <div class="input-actions">
      <button
        mat-icon-button
        class="task-btn"
        color="primary"
        (click)="parseTasks()"
        aria-label="Parse Tasks"
      >
        <mat-icon>check</mat-icon>
      </button>
      <button
        mat-icon-button
        class="task-btn"
        color="warn"
        (click)="clearInput()"
        aria-label="Clear Input"
      >
        <mat-icon>clear</mat-icon>
      </button>
    </div>

    <!-- Toggles -->
    <div class="toggles">
      <mat-slide-toggle
        [(ngModel)]="isAutoParse"
        color="primary"
        aria-label="Auto-Parse"
      >
        Auto-Parse
      </mat-slide-toggle>
      <mat-slide-toggle
        [(ngModel)]="isFunctionsWithTypes"
        color="primary"
        aria-label="With Function Types"
      >
        With Function Types
      </mat-slide-toggle>
      <mat-slide-toggle
        [(ngModel)]="isLongNamesShortened"
        color="primary"
        aria-label="Shorten Names"
      >
        Names Shortened
      </mat-slide-toggle>
      <mat-slide-toggle
        [(ngModel)]="isFilterUniques"
        color="primary"
        aria-label="Filter Uniques"
      >
        Filter Uniques
      </mat-slide-toggle>
    </div>
  </div>

  <!-- Task Summary -->

  <div class="summary">
    <div>
      <p>
        <strong>Input Type:</strong> {{ taskSummary.inputType || "Unknown" }}
      </p>
    </div>
    <div>
      <p><strong>Total Tasks:</strong> {{ taskSummary.taskCount }}</p>
      <p><strong>Unique Tasks:</strong> {{ taskSummary.uniqueTaskCount }}</p>
    </div>
  </div>
  <p>
    <strong>Target:</strong>
    <span class="overlord">{{ selectedOverlord?.name || "Unknown" }}</span>
  </p>

  <!-- Staged Task List -->
  <div class="task-list">
    <app-staged-task-list [tasks]="tasks" (tasksChange)="updateTasks($event)">
    </app-staged-task-list>
  </div>

  <!-- Save Button -->
  <div class="action-buttons">
    <button
      mat-raised-button
      color="primary"
      (click)="importTasks()"
      [disabled]="tasks.length === 0"
    >
      <mat-icon>save</mat-icon>
      Save Tasks
    </button>
  </div>
</div>
