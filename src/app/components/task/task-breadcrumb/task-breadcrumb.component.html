<div class="px-3 py-2 select-none">
  <div class="flex items-center gap-3 mb-1 flex-wrap">
    <!-- Back Button near title -->
    <button
      (click)="goBack()"
      class="p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0"
      title="Go back"
      aria-label="Go back"
    >
      ←
    </button>

    <!-- Current task title (last crumb) clickable -->
    <ng-container *ngIf="currentPath$ | async as path">
      <button
        *ngIf="path.length"
        class="text-xl font-semibold text-gray-900 text-left hover:underline max-w-full break-words"
        (click)="jumpTo(path[path.length - 1].id)"
        [title]="path[path.length - 1].name"
      >
        {{ path[path.length - 1].name }}
      </button>
    </ng-container>
  </div>

  <!-- Breadcrumb path all clickable -->
  <ng-container *ngIf="currentPath$ | async as path">
    <nav
      *ngIf="path.length > 1"
      class="flex items-center gap-1 overflow-x-auto text-gray-700 text-sm"
      aria-label="Breadcrumb"
    >
      <ng-container *ngFor="let crumb of path; let last = last">
        <a
          class="cursor-pointer hover:underline truncate max-w-[120px]"
          [title]="crumb.name"
          (click)="jumpTo(crumb.id)"
        >
          {{ crumb.name }}
        </a>
        <span *ngIf="!last" class="text-gray-400 mx-1 select-none">›</span>
      </ng-container>
    </nav>
  </ng-container>

  <ng-template #noPath>
    <span class="text-gray-500 italic">No path</span>
  </ng-template>
</div>
